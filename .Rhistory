file<-paste0("out_",rearType,"_bestMods.rData",collapse = "")
if(saveOutput){
save(out,
obj,
gr,
thisAIC,
SD,
data,
rep,
minJ,
maxJ,
subData, #This is the pit data
startYr, #Initial year
lastYr, #Last year
marVars, #marine variables
fwVars, #Freshwater variables
myVars, #Marine and freshwater variables
tmpMarVars, #Subset of marine variables for a particular model
pitTotal, #Raw pit total data
env_mu,
env_sc,
env_mu_2000_2015,
env_sc_2000_2015,
tmpenv, #All of the environmental data
rearType, #The names of the transportion and rearing combinations in the model
file=
file)
}
file
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/wrapper_modelRuns.r', echo=TRUE)
file<-paste0("out_",rearType,"_bestMods.rData",collapse = "")
file
file<-paste0("out_",rear,"_bestMods.rData",collapse = "")
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/wrapper_modelRuns.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/wrapper_modelRuns.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/wrapper_modelRuns.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
ylim <- 0.05
tiff("Chinook_survival.tiff", width=600, height=600)
wd <- "C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/"
setwd(wd)
Hf <- "out_H_bestMod.rData"
Wf <- "out_W_bestMod.rData"
rearType <- "H"
ifelse("H",load(Hf),load(Wf))
nt <- length(startYr:lastYr)
ifelse(rearType=="H",load(Hf),load(Wf))
out
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/wrapper_modelRuns.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/wrapper_modelRuns.r', echo=TRUE)
ylim <- 0.05
tiff("Chinook_survival.tiff", width=600, height=600)
wd <- "C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/"
setwd(wd)
Hf <- "out_H_bestMod.rData"
Wf <- "out_W_bestMod.rData"
rearType <- "H"
ifelse(rearType=="H",load(Hf),load(Wf))
ls()
SD
nt <- length(startYr:lastYr)
nj <- length(minJ:maxJ)
df <- data.frame(origin = rep("rearType", length(startYr:lastYr)*length(minJ:maxJ)),
yr = rep(startYr:lastYr, each = length(minJ:maxJ)),
j = rep(minJ:maxJ, length(startYr:lastYr)),
surv=c(t(matrix(SD$value[names(SD$value)=="s_tj"],nt,nj))),
sd = c(t(matrix(SD$sd[names(SD$value)=="s_tj"],nt,nj))))
ag_h <- aggregate(list(total=data$s_n, surv=data$s_k), by=list(yr = data$yr + startYr), sum)
ag_h$origin <- "H"
timing <- data.frame(origin = rep("H", length(data$yr[(data$s_k/data$s_n)<ylim])),
yr = data$yr[(data$s_k/data$s_n)<ylim] + startYr,
j = data$j[(data$s_k/data$s_n)<ylim]+minJ,
s_n = data$s_n[(data$s_k/data$s_n)<ylim],
s_k = data$s_k[(data$s_k/data$s_n)<ylim])
load(Wf)
Wdf <- data.frame(origin = rep("W", length(startYr:lastYr)*length(minJ:maxJ)),
yr = rep(startYr:lastYr, each = length(minJ:maxJ)),
j = rep(minJ:maxJ, length(startYr:lastYr)),
surv=c(t(matrix(SD$value[names(SD$value)=="s_tj"],nt,nj))),
sd = c(t(matrix(SD$sd[names(SD$value)=="s_tj"],nt,nj))))
ag_w <- aggregate(list(total=data$s_n, surv=data$s_k), by=list(yr = data$yr + startYr), sum)
ag_w$origin <- "W"
timing <- rbind(timing,
data.frame(origin = rep("W", length(data$yr[(data$s_k/data$s_n)<ylim])),
yr = data$yr[(data$s_k/data$s_n)<ylim] + startYr,
j = data$j[(data$s_k/data$s_n)<ylim]+minJ,
s_n = data$s_n[(data$s_k/data$s_n)<ylim],
s_k = data$s_k[(data$s_k/data$s_n)<ylim]))
df_n <- rbind(ag_h,ag_w)
df <- rbind(Hdf,Wdf)
timing <- rbind(timing,
data.frame(origin = rep("W", length(data$yr[(data$s_k/data$s_n)<ylim])),
yr = data$yr[(data$s_k/data$s_n)<ylim] + startYr,
j = data$j[(data$s_k/data$s_n)<ylim]+minJ,
s_n = data$s_n[(data$s_k/data$s_n)<ylim],
s_k = data$s_k[(data$s_k/data$s_n)<ylim]))
df_n <- rbind(ag_h,ag_w)
df <- rbind(Hdf,Wdf)
# myYears <- c(2002,2003,2009,2010,2012,2013)
myYears <- startYr:lastYr
df_n <- df_n[df_n$yr%in%myYears,]
df <- df[df$yr%in%myYears,]
timing <- timing[timing$yr%in%myYears,]
p <- ggplot(data=df, aes(x=as.Date(j, origin = as.Date("2018-01-01")), y = plogis(surv), factor(origin))) +
geom_line(size = 0.75,alpha = 1, aes(colour=factor(origin))) +
geom_ribbon(aes(ymin=plogis(surv - 1.96 * sd),
ymax=plogis(surv + 1.96 * sd),
# colour = factor(origin),
fill=factor(origin)),
alpha = 0.15)  +
scale_x_date(date_labels = "%b") +
facet_wrap(~yr,scales = "free_y") +
xlim(110,160) +
theme(panel.background = element_blank()) +
# ylim(0,0.2) +
ylab("Marine survival (ocean entry year)") +
xlab("Calendar day")
p <- p +
geom_point(data=timing,
aes(x=as.Date(j, origin = as.Date("2018-01-01")), y = s_k/s_n,
colour = factor(origin)),
shape = 16,
size = 2, alpha = 0.4) +
scale_x_date(date_labels = "%b") +
facet_wrap(~yr, scales = "free_y")
# scale_y_continuous(
#   "PIT observations per day",
#   sec.axis = sec_axis(~ . * 0.0001, name = "Survival")
# )
df_n$label <- paste(df_n$origin," = ", df_n$surv,"/",df_n$total)
# p <- p +
#   geom_text(data = df_n[df_n$origin=="W",],
#             aes(label = label, x=as.Date(150, origin = as.Date("2018-01-01")), y = 0.1))
p <- p +
geom_text(data = df_n[df_n$origin=="W",],
aes(label = label, x=as.Date(150, origin = as.Date("2018-01-01")), y = ylim))
p <- p +
geom_text(data = df_n[df_n$origin=="H",],
aes(label = label, x=as.Date(150, origin = as.Date("2018-01-01")), y = ylim * 0.8))
print(p)
dev.off()
print(p)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
print(p)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
ylim
timing
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
range(timing$s_k/timing$s_n)
df_n
df_n <- rbind(ag_h,ag_w)
for(i in unique(df_n$yr)){
df_n$ylim[df_n$yr==i] <- max(df_n$surv[df_n$yr==i]/df_n$total[df_n$yr==i] )
}
df_n
df_n <- rbind(ag_h,ag_w)
for(i in unique(df_n$yr)){
df_n$ylim[df_n$yr==i] <- max(df$surv[df$yr==i]=2*df$sd[df$yr==i] )
}
for(i in unique(df_n$yr)){
df_n$ylim[df_n$yr==i] <- max(df$surv[df$yr==i]+2*df$sd[df$yr==i] )
}
df_n
for(i in unique(df_n$yr)){
df_n$ylim[df_n$yr==i] <- max(plogis(df$surv[df$yr==i]+2*df$sd[df$yr==i] ))
}
df_n
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
# tiff(paste0("DailySurvival_.tiff"), width=800, height=600)
wd <- "C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/"
setwd(wd)
Hf <- "out_H_bestMod.rData"
Wf <- "out_W_bestMod.rData"
load(Hf)
load(Wf)
dev <- seq(-3,3,0.1)
nd <- length(dev)
beta <- c(plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[1,1]),
plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[2,1]))
beta <- (beta - plogis(rep$mu_s))/plogis(rep$mu_s)*100
df <- data.frame(Origin = rep("Wild", nd),
dev = dev,
beta = rep(marVars[1:2],each=nd),
surv=beta)
load(Hf)
dev <- seq(-3,3,0.1)
nd <- length(dev)
beta <- c(plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[1,1]),
plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[2,1]))
beta <- (beta - plogis(rep$mu_s))/plogis(rep$mu_s)*100
df <- rbind(df,data.frame(Origin = rep("Hatchery", nd),
dev = dev,
beta = rep(marVars[1:2],each=nd),
surv=beta))
dev <- seq(-1.96,1.96,0.05)
nd <- length(dev)
beta <- c(plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[1,1]),
plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[2,1]))
beta <- (beta - plogis(rep$mu_s))/plogis(rep$mu_s)*100
df <- data.frame(Origin = rep("Wild", nd),
dev = dev,
beta = rep(marVars[1:2],each=nd),
surv=beta)
load(Hf)
dev <- seq(-3,3,0.1)
nd <- length(dev)
beta <- c(plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[1,1]),
plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[2,1]))
beta <- (beta - plogis(rep$mu_s))/plogis(rep$mu_s)*100
df <- rbind(df,data.frame(Origin = rep("Hatchery", nd),
dev = dev,
beta = rep(marVars[1:2],each=nd),
surv=beta))
p <- ggplot(data=df[df$Origin=="Wild",], aes(x=dev,
y = surv,
group=beta,
colour=beta))+
geom_line(size = 0.5,alpha = 1)+
theme(panel.background = element_blank(),
axis.title=element_text(size=8)) +
ylab("% change in survival") +
xlab("")+
theme(legend.position=c(.8,.75),
legend.title = element_blank())+
ylim(-100,200)
p2 <- ggplot(data=df[df$Origin=="Hatchery",], aes(x=dev,
y = surv,
group=beta,
colour=beta))+
geom_line(size = 0.5,alpha = 1)+
theme(panel.background = element_blank()) +
ylab("% change in survival") +
xlab("Environmental deviate")+
theme(legend.position=c(.8,.75),
legend.title = element_blank(),
axis.title=element_text(size=8))+
ylim(-100,200)
print(p)
print(p2)
h_names <- names(subData[h_env])
h_env <- c(11,24)
h_names <- names(subData[h_env])
h_names
w_names <- names(subData[w_env])
w_env <- c(15,36)
w_names <- names(subData[w_env])
w_names
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
envdata[,"npgo.sum"]
plot(envdata[,"npgo.sum"],envdata[,"transport.sum"])
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
print(o3)
SD
SD$par.fixed
SD$sd
names(SD$sd)
SD[,2]
SD$cov.fixed
diag(SD$cov.fixed)
parSD <- c(exp(rep$mu_s + diag(SD$cov.fixed)["mu_s"])
,atan(rep$frho_j)*2/3.154
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,exp(rep$fpsi_j)
,exp(rep$fpsi_jt)
,rep$beta_mar
,AIC
,gr)
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,""
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt)*2/3.154
,exp(rep$fpsi_j)
,exp(rep$fpsi_jt)
,rep$beta_mar
,AIC
,gr)
parSD_pos
1.96 * sqrt(diag(SD$cov.fixed)["mu_s"])
exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"])
)
rep$beta_mar
c(rep$beta_mar)
sqrt(diag(SD$cov.fixed)["beta_mar"]
)
diag(SD$cov.fixed)
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,""
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,""
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"]))
,AIC
,gr)
parSD_pos
load(files[1])
Hf <- "out_H_bestMod.rData"
Wf <- "out_W_bestMod.rData"
files <- c(Hf,Wf)
load(files[1])
ls()
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,""
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,""
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
parSD_pos
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,NA
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,NA
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
parSD_pos
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/table_bestFitMods.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/table_bestFitMods.r', echo=TRUE)
par
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/table_bestFitMods.r', echo=TRUE)
par <- cbind(par,
c(exp(rep$mu_s)
,atan(rep$frho_j)*2/3.154
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,exp(rep$fpsi_j)
,exp(rep$fpsi_jt)
,rep$beta_mar))
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/table_bestFitMods.r', echo=TRUE)
par <- as.data.frame(par=par)
par
load(files[1])
par <- c(exp(rep$mu_s)
,NA
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,NA
,exp(rep$fpsi_jt)
,rep$beta_mar)
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,NA
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,NA
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
parSD_neg <- c(exp(rep$mu_s - 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,NA
,atan(rep$frho2_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,NA
,exp(rep$fpsi_jt - 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar - 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
load(files[2])
par <- cbind(par,
c(exp(rep$mu_s)
,atan(rep$frho_j)*2/3.154
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,exp(rep$fpsi_j)
,exp(rep$fpsi_jt)
,rep$beta_mar))
par
par <- as.data.frame(par=paste0(par," ( ",parSD_neg,", ",parSD_pos," )"))
paste0(par," ( ",parSD_neg,", ",parSD_pos," )")
paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )")
load(files[1])
par <- c(exp(rep$mu_s)
,NA
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,NA
,exp(rep$fpsi_jt)
,rep$beta_mar)
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,NA
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,NA
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
parSD_neg <- c(exp(rep$mu_s - 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,NA
,atan(rep$frho2_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,NA
,exp(rep$fpsi_jt - 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar - 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
df <- as.data.frame(par=paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )"))
paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )")
df <- data.frame(par=paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )"))
df <- data.frame(Hatchery=paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )"),
Wild=paste0(round(par_w,3)," ( ",round(parSD_neg_w,3),", ",round(parSD_pos_w,3)," )"))
load(files[2])
par_w <- c(exp(rep$mu_s)
,atan(rep$frho_j)*2/3.154
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,exp(rep$fpsi_j)
,exp(rep$fpsi_jt)
,rep$beta_mar)
parSD_pos_w <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,atan(rep$frho_j + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_j"]))*2/3.154
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,exp(rep$fpsi_j + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_j"]))
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
parSD_neg_w <- c(exp(rep$mu_s - 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,atan(rep$frho_j - 1.96 * sqrt(diag(SD$cov.fixed)["frho2_j"]))*2/3.154
,atan(rep$frho2_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,exp(rep$fpsi_j - 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_j"]))
,exp(rep$fpsi_jt - 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar - 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
row.names(par) <- c("Mean annual survival"
,"Correlation of day effect"
,"Correlation of day in day/year effect"
,"Correlation of year in day/year effect"
,"Process error for day effect"
,"Process error for day/year effect"
,"Effect of first marine covariate"
,"Effect of second marine covariate")
df <- data.frame(Hatchery=paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )"),
Wild=paste0(round(par_w,3)," ( ",round(parSD_neg_w,3),", ",round(parSD_pos_w,3)," )"))
row.names(df) <- c("Mean annual survival"
,"Correlation of day effect"
,"Correlation of day in day/year effect"
,"Correlation of year in day/year effect"
,"Process error for day effect"
,"Process error for day/year effect"
,"Effect of first marine covariate"
,"Effect of second marine covariate")
df
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/table_bestFitMods.r', echo=TRUE)
df
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", row.names = FALSE)
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", row.names = FALSE, sep = "\t")
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", row.names = FALSE, sep = "/t")
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", row.names = FALSE, sep = "\t")
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", row.names = FALSE, sep = "/t")
?write.csv
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", sep = ";")
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", sep = "\t")
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_EnvironmentalVariableWt_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_EnvironmentalVariableWt_ggplot.r', echo=TRUE)
