#   "PIT observations per day",
#   sec.axis = sec_axis(~ . * 0.0001, name = "Survival")
# )
df_n$label <- paste(df_n$origin," = ", df_n$surv,"/",df_n$total)
# p <- p +
#   geom_text(data = df_n[df_n$origin=="W",],
#             aes(label = label, x=as.Date(150, origin = as.Date("2018-01-01")), y = 0.1))
p <- p +
geom_text(data = df_n[df_n$origin=="W",],
aes(label = label, x=as.Date(150, origin = as.Date("2018-01-01")), y = ylim))
p <- p +
geom_text(data = df_n[df_n$origin=="H",],
aes(label = label, x=as.Date(150, origin = as.Date("2018-01-01")), y = ylim * 0.8))
print(p)
dev.off()
print(p)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
print(p)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
ylim
timing
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
range(timing$s_k/timing$s_n)
df_n
df_n <- rbind(ag_h,ag_w)
for(i in unique(df_n$yr)){
df_n$ylim[df_n$yr==i] <- max(df_n$surv[df_n$yr==i]/df_n$total[df_n$yr==i] )
}
df_n
df_n <- rbind(ag_h,ag_w)
for(i in unique(df_n$yr)){
df_n$ylim[df_n$yr==i] <- max(df$surv[df$yr==i]=2*df$sd[df$yr==i] )
}
for(i in unique(df_n$yr)){
df_n$ylim[df_n$yr==i] <- max(df$surv[df$yr==i]+2*df$sd[df$yr==i] )
}
df_n
for(i in unique(df_n$yr)){
df_n$ylim[df_n$yr==i] <- max(plogis(df$surv[df$yr==i]+2*df$sd[df$yr==i] ))
}
df_n
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_AnnualSurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DayXYearSurvival_ggplot.r', echo=TRUE)
# tiff(paste0("DailySurvival_.tiff"), width=800, height=600)
wd <- "C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/"
setwd(wd)
Hf <- "out_H_bestMod.rData"
Wf <- "out_W_bestMod.rData"
load(Hf)
load(Wf)
dev <- seq(-3,3,0.1)
nd <- length(dev)
beta <- c(plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[1,1]),
plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[2,1]))
beta <- (beta - plogis(rep$mu_s))/plogis(rep$mu_s)*100
df <- data.frame(Origin = rep("Wild", nd),
dev = dev,
beta = rep(marVars[1:2],each=nd),
surv=beta)
load(Hf)
dev <- seq(-3,3,0.1)
nd <- length(dev)
beta <- c(plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[1,1]),
plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[2,1]))
beta <- (beta - plogis(rep$mu_s))/plogis(rep$mu_s)*100
df <- rbind(df,data.frame(Origin = rep("Hatchery", nd),
dev = dev,
beta = rep(marVars[1:2],each=nd),
surv=beta))
dev <- seq(-1.96,1.96,0.05)
nd <- length(dev)
beta <- c(plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[1,1]),
plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[2,1]))
beta <- (beta - plogis(rep$mu_s))/plogis(rep$mu_s)*100
df <- data.frame(Origin = rep("Wild", nd),
dev = dev,
beta = rep(marVars[1:2],each=nd),
surv=beta)
load(Hf)
dev <- seq(-3,3,0.1)
nd <- length(dev)
beta <- c(plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[1,1]),
plogis(rep$mu_s+cbind(dev)%*%rep$beta_mar[2,1]))
beta <- (beta - plogis(rep$mu_s))/plogis(rep$mu_s)*100
df <- rbind(df,data.frame(Origin = rep("Hatchery", nd),
dev = dev,
beta = rep(marVars[1:2],each=nd),
surv=beta))
p <- ggplot(data=df[df$Origin=="Wild",], aes(x=dev,
y = surv,
group=beta,
colour=beta))+
geom_line(size = 0.5,alpha = 1)+
theme(panel.background = element_blank(),
axis.title=element_text(size=8)) +
ylab("% change in survival") +
xlab("")+
theme(legend.position=c(.8,.75),
legend.title = element_blank())+
ylim(-100,200)
p2 <- ggplot(data=df[df$Origin=="Hatchery",], aes(x=dev,
y = surv,
group=beta,
colour=beta))+
geom_line(size = 0.5,alpha = 1)+
theme(panel.background = element_blank()) +
ylab("% change in survival") +
xlab("Environmental deviate")+
theme(legend.position=c(.8,.75),
legend.title = element_blank(),
axis.title=element_text(size=8))+
ylim(-100,200)
print(p)
print(p2)
h_names <- names(subData[h_env])
h_env <- c(11,24)
h_names <- names(subData[h_env])
h_names
w_names <- names(subData[w_env])
w_env <- c(15,36)
w_names <- names(subData[w_env])
w_names
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
envdata[,"npgo.sum"]
plot(envdata[,"npgo.sum"],envdata[,"transport.sum"])
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_envEffect_ggplot.r', echo=TRUE)
print(o3)
SD
SD$par.fixed
SD$sd
names(SD$sd)
SD[,2]
SD$cov.fixed
diag(SD$cov.fixed)
parSD <- c(exp(rep$mu_s + diag(SD$cov.fixed)["mu_s"])
,atan(rep$frho_j)*2/3.154
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,exp(rep$fpsi_j)
,exp(rep$fpsi_jt)
,rep$beta_mar
,AIC
,gr)
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,""
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt)*2/3.154
,exp(rep$fpsi_j)
,exp(rep$fpsi_jt)
,rep$beta_mar
,AIC
,gr)
parSD_pos
1.96 * sqrt(diag(SD$cov.fixed)["mu_s"])
exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"])
)
rep$beta_mar
c(rep$beta_mar)
sqrt(diag(SD$cov.fixed)["beta_mar"]
)
diag(SD$cov.fixed)
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,""
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,""
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"]))
,AIC
,gr)
parSD_pos
load(files[1])
Hf <- "out_H_bestMod.rData"
Wf <- "out_W_bestMod.rData"
files <- c(Hf,Wf)
load(files[1])
ls()
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,""
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,""
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
parSD_pos
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,NA
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,NA
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
parSD_pos
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/table_bestFitMods.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/table_bestFitMods.r', echo=TRUE)
par
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/table_bestFitMods.r', echo=TRUE)
par <- cbind(par,
c(exp(rep$mu_s)
,atan(rep$frho_j)*2/3.154
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,exp(rep$fpsi_j)
,exp(rep$fpsi_jt)
,rep$beta_mar))
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/table_bestFitMods.r', echo=TRUE)
par <- as.data.frame(par=par)
par
load(files[1])
par <- c(exp(rep$mu_s)
,NA
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,NA
,exp(rep$fpsi_jt)
,rep$beta_mar)
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,NA
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,NA
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
parSD_neg <- c(exp(rep$mu_s - 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,NA
,atan(rep$frho2_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,NA
,exp(rep$fpsi_jt - 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar - 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
load(files[2])
par <- cbind(par,
c(exp(rep$mu_s)
,atan(rep$frho_j)*2/3.154
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,exp(rep$fpsi_j)
,exp(rep$fpsi_jt)
,rep$beta_mar))
par
par <- as.data.frame(par=paste0(par," ( ",parSD_neg,", ",parSD_pos," )"))
paste0(par," ( ",parSD_neg,", ",parSD_pos," )")
paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )")
load(files[1])
par <- c(exp(rep$mu_s)
,NA
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,NA
,exp(rep$fpsi_jt)
,rep$beta_mar)
parSD_pos <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,NA
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,NA
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
parSD_neg <- c(exp(rep$mu_s - 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,NA
,atan(rep$frho2_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,NA
,exp(rep$fpsi_jt - 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar - 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
df <- as.data.frame(par=paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )"))
paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )")
df <- data.frame(par=paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )"))
df <- data.frame(Hatchery=paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )"),
Wild=paste0(round(par_w,3)," ( ",round(parSD_neg_w,3),", ",round(parSD_pos_w,3)," )"))
load(files[2])
par_w <- c(exp(rep$mu_s)
,atan(rep$frho_j)*2/3.154
,atan(rep$frho2_jt)*2/3.154
,atan(rep$frho1_jt)*2/3.154
,exp(rep$fpsi_j)
,exp(rep$fpsi_jt)
,rep$beta_mar)
parSD_pos_w <- c(exp(rep$mu_s + 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,atan(rep$frho_j + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_j"]))*2/3.154
,atan(rep$frho2_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt + 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,exp(rep$fpsi_j + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_j"]))
,exp(rep$fpsi_jt + 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar + 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
parSD_neg_w <- c(exp(rep$mu_s - 1.96 * sqrt(diag(SD$cov.fixed)["mu_s"]))
,atan(rep$frho_j - 1.96 * sqrt(diag(SD$cov.fixed)["frho2_j"]))*2/3.154
,atan(rep$frho2_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho2_jt"]))*2/3.154
,atan(rep$frho1_jt - 1.96 * sqrt(diag(SD$cov.fixed)["frho1_jt"]))*2/3.154
,exp(rep$fpsi_j - 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_j"]))
,exp(rep$fpsi_jt - 1.96 * sqrt(diag(SD$cov.fixed)["fpsi_jt"]))
,c(rep$beta_mar - 1.96 * sqrt(diag(SD$cov.fixed)[names(diag(SD$cov.fixed))=="beta_mar"])))
row.names(par) <- c("Mean annual survival"
,"Correlation of day effect"
,"Correlation of day in day/year effect"
,"Correlation of year in day/year effect"
,"Process error for day effect"
,"Process error for day/year effect"
,"Effect of first marine covariate"
,"Effect of second marine covariate")
df <- data.frame(Hatchery=paste0(round(par,3)," ( ",round(parSD_neg,3),", ",round(parSD_pos,3)," )"),
Wild=paste0(round(par_w,3)," ( ",round(parSD_neg_w,3),", ",round(parSD_pos_w,3)," )"))
row.names(df) <- c("Mean annual survival"
,"Correlation of day effect"
,"Correlation of day in day/year effect"
,"Correlation of year in day/year effect"
,"Process error for day effect"
,"Process error for day/year effect"
,"Effect of first marine covariate"
,"Effect of second marine covariate")
df
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/table_bestFitMods.r', echo=TRUE)
df
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", row.names = FALSE)
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", row.names = FALSE, sep = "\t")
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", row.names = FALSE, sep = "/t")
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", row.names = FALSE, sep = "\t")
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", row.names = FALSE, sep = "/t")
?write.csv
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", sep = ";")
# names(par) <- c("Hatchery", "Wild")
write.csv(df,file="table_bestFitMods.csv", sep = "\t")
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_DailySurv_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_EnvironmentalVariableWt_ggplot.r', echo=TRUE)
source('C:/NOAA/PROJECTS/COLLEAGUES/BURKE/SAR_PAPER/fig_EnvironmentalVariableWt_ggplot.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
Hf <- "out_H_bestDialyMod.rData"
load(Hf)
source('C:/CHASCO/PROJECTS/sar_paper/fig_DailySurv_ggplot.r', echo=TRUE)
print(o3)
ls()
load(Hf)
SD
H
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
SD
rep$eps_j
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
sd
SD
source('C:/CHASCO/PROJECTS/sar_paper/fig_DailySurv_ggplot.r', echo=TRUE)
SD
source('C:/CHASCO/PROJECTS/sar_paper/table_bestFitMods.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/table_bestFitMods.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/table_bestFitMods.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/table_bestFitMods.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
load("C:/CHASCO/PROJECTS/sar_paper/W.rData")
head(W)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
nk_dim
data$k
pitTotal$k
pitTotal
load("envData.rData")
marVars <- c(names(envdata)[2:13],names(envdata)[18:42])
# #Freshwater variables
fwVars <- c(
'F.S2.ParrSu'
# ,'F.S3.ParrF'
# ,'T.S2.ParrSu','T.S4.ParrW'
# ,'aprmayjunetempLGR','aprmayjuneflowLGR'
# ,'aprmayjunBON.scrollTEMP','aprmayjunFLOW.obs'
)
#Combine the marine and freshwater variables
myVars <-c(marVars)
#'Tranport' or 'In-river' - subset the pit data
myTrans <- c("In-river")
saveOutput <- TRUE
numberOfMarineVariables <- max(nn,1)
if(nn==0){
fixed_mar <- 0
}
if(nn>0){
fixed_mar <- 1
}
#Get all of the model combinations you are interested in
myTmpMarVars <- combn(1:length(marVars),numberOfMarineVariables)
myTmpMarVars
#Total number of models
nmod <- ncol(myTmpMarVars)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
hmods <- c("out_H_Null_Mod.rData",
"out_H_Mar_Mod.rData",
"out_H_NoMar_Mod.rData",
"out_H_bestMod.rData")
wmods <- c("out_W_Null_Mod.rData",
"out_W_Mar_Mod.rData",
"out_W_NoMar_Mod.rData",
"out_W_bestMod.rData")
df <- data.frame(Mod=NA,Dev=NA)
icnt <- 1
for(i in hmods){
load(i)
df[icnt,2] <- (data$s_k/data$s_n - rep$s_hat)^2
}
for(i in hmods){
load(i)
df[icnt,2] <- sum((data$s_k/data$s_n - rep$s_hat)^2)
}
df
hmods
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
load(i)
ls()
out$objective
-2*out$objective
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
source('C:/CHASCO/PROJECTS/sar_paper/wrapper_modelRuns.r', echo=TRUE)
source('C:/CHASCO/PROJECTS/sar_paper/table_resDeviance.r', echo=TRUE)
df
